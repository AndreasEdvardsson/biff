#!/bin/bash
set -e

setup () {
  which clj npm > /dev/null # Assert dependencies
  npm install # Or `npm init; npm install --save-dev shadow-cljs; npm install --save react react-dom`
}

dev () {
  clj -X:deps git-resolve-tags
  BIFF_ENV=dev clj -A:cljs "$@" -M -m example.core
}

compile-cljs () {
  npx shadow-cljs release $CLJS_APPS
  mkdir -p resources/www/cljs/app
  cp {www-dev,resources/www}/cljs/app/main.js
}

"$@"
