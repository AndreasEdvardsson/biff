#!/usr/bin/env bash

slate:dev () {
  cd slate
  bundle exec middleman server
}

slate:deploy () {
  cd slate
  bundle exec middleman build --clean
  find build -type f | sed 's/^build//' > sitemap.txt
  mv sitemap.txt build/sitemap.txt
  netlify deploy --site biffdocs -d build --prod
}

codox:deploy () {
  rm -rf target/doc
  clj -X:codox
  cd target
  find doc -type f | sed 's/^doc//' > sitemap.txt
  mv sitemap.txt doc/sitemap.txt
  netlify deploy --site biffapi -d doc --prod
}

jar () {
  echo You updated the version in pom.xml, right?
  clj -Spom
  clj -X:jar :jar target/biff.jar
}

jar:deploy () {
  clj -X:deploy
}

"$@"
